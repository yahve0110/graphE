(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(25)},20:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(13),c=a.n(r),s=(a(20),a(9)),o=a(27);var m=e=>{let{token:t}=e;const[a,r]=Object(n.useState)({}),[c,s]=Object(n.useState)(!0),[o,m]=Object(n.useState)(null);return Object(n.useEffect)(()=>{(async()=>{try{const e=await fetch("https://01.kood.tech/api/graphql-engine/v1/graphql",{method:"POST",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify({query:"query {\n                            user {\n                                id\n                                login\n                                campus\n                                firstName\n                                lastName\n                                email\n                                auditRatio\n                            }\n                        }"})}),a=await e.json();r(a.data.user[0]),s(!1)}catch(o){m(o),s(!1)}})()},[t]),c?l.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."):o?l.a.createElement("div",null,"\u041e\u0448\u0438\u0431\u043a\u0430: ",o.message):l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("span",{className:"red-label"},"ID:")," ",a.id),l.a.createElement("p",null,l.a.createElement("span",{className:"red-label"},"Login:")," ",a.login),l.a.createElement("p",null,l.a.createElement("span",{className:"red-label"},"Name:")," ",a.firstName),l.a.createElement("p",null,l.a.createElement("span",{className:"red-label"},"LastName:")," ",a.lastName),l.a.createElement("p",null,l.a.createElement("span",{className:"red-label"},"Email:")," ",a.email),l.a.createElement("p",null,l.a.createElement("span",{className:"red-label"},"Campus:")," ",a.campus),l.a.createElement("p",null,l.a.createElement("span",{className:"red-label"},"Audit:")," ",a.auditRatio))};var i=e=>{let{data:t,style:a}=e;const n=40*Object.keys(t).length,r=Math.max(...Object.values(t));return l.a.createElement("div",{style:{...a,overflowX:"auto"}},l.a.createElement("svg",{width:"100%",height:"95%",viewBox:`0 0 ${n+100} 500`},l.a.createElement("g",{transform:"translate(50, 10)"},l.a.createElement("line",{x1:"0",y1:"0",x2:"0",y2:400,stroke:"#333"}),Array.from({length:6},(e,t)=>l.a.createElement("text",{key:t,x:"-10",y:80*t,textAnchor:"end",fontSize:"12",fill:"#333"},Math.round(r-r/5*t))),Object.entries(t).map((e,t)=>{let[a,n]=e;return l.a.createElement("g",{key:a,transform:`translate(${40*t}, 0)`},l.a.createElement("rect",{x:"0",y:400-n/r*400,width:20,height:n/r*400,fill:"#3f51b5",rx:"5"}),l.a.createElement("text",{x:10,y:400-n/r*400-10,fontSize:"12",textAnchor:"middle",fill:"#333"},n),l.a.createElement("text",{x:10,y:420,fontSize:"12",textAnchor:"middle",fill:"#333",transform:"rotate(45, 10, 420)"},a.replace("skill_","")))}),l.a.createElement("line",{x1:"0",y1:400,x2:n,y2:400,stroke:"#333"}))))};var p=e=>{let{data:t}=e;const a=Object.entries(t).filter(e=>{let[t]=e;return"total"!==t}),n=a.reduce((e,t)=>{let[a,n]=t;return e+n},0),r=e=>[200*Math.cos(2*Math.PI*e),200*Math.sin(2*Math.PI*e)];let c=0;return l.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"20px"}},l.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 400 400"},l.a.createElement("g",{transform:"translate(200, 200)"},a.map((e,t)=>{let[s,o]=e;const[m,i]=r(c);c+=o/n;const[p,d]=r(c),u=[`M ${m} ${i}`,`A 200 200 0 ${o/n>.5?1:0} 1 ${p} ${d}`,"L 0 0"].join(" ");return l.a.createElement("g",{key:s},l.a.createElement("path",{d:u,fill:`hsl(${360*t/a.length}, 70%, 50%)`}),l.a.createElement("text",{transform:`translate(${(m+p)/2*.6}, ${(i+d)/2*.6})`,textAnchor:"middle",alignmentBaseline:"middle",fill:"#000",fontSize:"10"},s.replace("skill_","")))}))))};var d=e=>{let{token:t}=e;const[a,r]=Object(n.useState)({}),[c,s]=Object(n.useState)(!0),[o,m]=Object(n.useState)(null),[d,u]=Object(n.useState)(null);if(Object(n.useEffect)(()=>{(async()=>{try{const e=await fetch("https://01.kood.tech/api/graphql-engine/v1/graphql",{method:"POST",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify({query:"query {\n                            user {\n                                id\n                            }\n                        }"})}),a=(await e.json()).data.user[0];u(a.id)}catch(o){m(o),s(!1)}})()},[t]),Object(n.useEffect)(()=>{d&&(async()=>{try{const e=100;let a=0,n=[],l={},c=!0;for(;c;){const l=await fetch("https://01.kood.tech/api/graphql-engine/v1/graphql",{method:"POST",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify({query:`query {\n                                    transaction (limit:${e}, offset:${a}, where:{\n                                        _and:[{userId:{_eq:${d}}},{type:{_ilike:"%skill%"}}]\n                                        }\n                                    ){\n                                        type\n                                        amount\n                                        objectId\n                                        object{\n                                            name\n                                        }\n                                        createdAt\n                                        path\n                                    }\n                                }`})}),r=await l.json();r.data.transaction.length>0?(n.push(...r.data.transaction),a+=e):c=!1}n.forEach(e=>{l.hasOwnProperty(e.type)?l[e.type]+=e.amount:l[e.type]=e.amount});let i=0;for(let t in l)i+=l[t];l.total=i,r(l),s(!1)}catch(o){m(o),s(!1)}})()},[t,d]),c)return l.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...");if(o)return l.a.createElement("div",null,"\u041e\u0448\u0438\u0431\u043a\u0430: ",o.message);const E=Object.entries(a);return l.a.createElement("div",{style:{padding:"20px",maxWidth:"100%",boxSizing:"border-box"}},l.a.createElement("h1",null,"Skills"),l.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",marginBottom:"20px"}},l.a.createElement(i,{data:a,style:{flex:"1 1 45%",maxWidth:"100%",minWidth:"300px",boxSizing:"border-box"}}),l.a.createElement(p,{data:a,style:{flex:"1 1 45%",maxWidth:"100%",minWidth:"300px",boxSizing:"border-box"}})),l.a.createElement("ul",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"20px",padding:"0",listStyleType:"none",boxSizing:"border-box",margin:"0"}},E.map(e=>{let[t,a]=e;return l.a.createElement("li",{key:t,style:{marginBottom:"10px",width:"calc(50% - 10px)",minWidth:"150px",boxSizing:"border-box"}},l.a.createElement("strong",null,l.a.createElement("span",{className:"red-label"},t.replace("skill_",""),":"))," ",a)})))};var u=e=>{let{token:t}=e;const[a,r]=Object(n.useState)([]),[c,s]=Object(n.useState)(!0),[o,m]=Object(n.useState)(null),[i,p]=Object(n.useState)(""),[d,u]=Object(n.useState)(1);if(Object(n.useEffect)(()=>{(async()=>{try{const e=await fetch("https://01.kood.tech/api/graphql-engine/v1/graphql",{method:"POST",headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"},body:JSON.stringify({query:'query {\n                            transaction(where: { type: { _eq: "xp" } }) {\n                                type\n                                amount\n                                objectId\n                                object {\n                                    name\n                                }\n                                userId\n                                createdAt\n                                path\n                            }\n                        }'})}),a=await e.json();r(a.data.transaction),s(!1)}catch(o){m(o),s(!1)}})()},[t]),c)return l.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...");if(o)return l.a.createElement("div",null,"\u041e\u0448\u0438\u0431\u043a\u0430: ",o.message);const E=Array.from(new Set(a.map(e=>e.path.split("/").filter(Boolean)[1]))),g=i?a.filter(e=>e.path.split("/").filter(Boolean)[1]===i):a,h=5*d,y=h-5,b=g.slice(y,h),x=Math.ceil(g.length/5),f=e=>u(e);if(g.length>5){const e=[];for(let t=1;t<=x;t++){const a=5*(t-1),n=5*t;g.slice(a,n).length>0&&e.push(l.a.createElement("li",{key:t,style:{margin:"5px"}},l.a.createElement("button",{onClick:()=>f(t)},t)))}return l.a.createElement("div",{className:"user-project"},l.a.createElement("h1",null,"XP Transactions"),l.a.createElement("select",{value:i,onChange:e=>p(e.target.value),style:{marginBottom:"20px",padding:"10px",width:"300px"}},l.a.createElement("option",{value:""},"Select Project"),E.map((e,t)=>l.a.createElement("option",{key:t,value:e},e))),l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},b.map((e,t)=>{const a=e.path.split("/").filter(Boolean);return l.a.createElement("div",{key:t,style:{width:"100%",marginBottom:"20px",padding:"20px",border:"1px solid #ddd",borderRadius:"8px",background:"olive",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}},l.a.createElement("p",null,l.a.createElement("strong",null,l.a.createElement("span",{className:"red-label"},"Type:"))," ",e.type),l.a.createElement("p",null,l.a.createElement("strong",null,l.a.createElement("span",{className:"red-label"},"Amount:"))," ",e.amount),l.a.createElement("p",null,l.a.createElement("strong",null,l.a.createElement("span",{className:"red-label"},"Object Name:"))," ",e.object.name),l.a.createElement("p",null,l.a.createElement("strong",null,l.a.createElement("span",{className:"red-label"},"Created:"))," ",new Date(e.createdAt).toLocaleString()),l.a.createElement("ul",{style:{padding:0,listStyle:"none"}},a.map((e,t)=>1===t&&l.a.createElement(l.a.Fragment,{key:t},l.a.createElement("p",{style:{margin:0}},l.a.createElement("strong",null,l.a.createElement("span",{className:"red-label"},"Project:"))," ",e)))))})),l.a.createElement("div",{style:{marginTop:"20px"}},l.a.createElement("ul",{style:{display:"flex",justifyContent:"center",listStyle:"none",padding:0,flexWrap:"wrap"}},e)))}return l.a.createElement("div",{className:"user-project"},l.a.createElement("h1",null,"XP Transactions"),l.a.createElement("select",{value:i,onChange:e=>p(e.target.value),style:{marginBottom:"20px",padding:"10px",width:"300px"}},l.a.createElement("option",{value:""},"Select Project Part"),E.map((e,t)=>l.a.createElement("option",{key:t,value:e},e))),l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},b.map((e,t)=>{const a=e.path.split("/").filter(Boolean);return l.a.createElement("div",{key:t,style:{width:"100%",marginBottom:"20px",padding:"20px",border:"1px solid #ddd",borderRadius:"8px",background:"olive",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}},l.a.createElement("p",null,l.a.createElement("strong",null,l.a.createElement("span",{className:"red-label"},"Type:"))," ",e.type),l.a.createElement("p",null,l.a.createElement("strong",null,l.a.createElement("span",{className:"red-label"},"Amount:"))," ",e.amount),l.a.createElement("p",null,l.a.createElement("strong",null,l.a.createElement("span",{className:"red-label"},"Object Name:"))," ",e.object.name),l.a.createElement("p",null,l.a.createElement("strong",null,l.a.createElement("span",{className:"red-label"},"Created:"))," ",new Date(e.createdAt).toLocaleString()),l.a.createElement("ul",{style:{padding:0,listStyle:"none"}},a.map((e,t)=>1===t&&l.a.createElement(l.a.Fragment,{key:t},l.a.createElement("p",{style:{margin:0}},l.a.createElement("strong",null,l.a.createElement("span",{className:"red-label"},"Project:"))," ",e)))))})))},E=a(3);var g=()=>{const e=Object(E.m)();return l.a.createElement("button",{className:"logout-button",onClick:()=>{localStorage.removeItem("token"),e("/login"),window.location.reload()}},"Logout")};var h=()=>{const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(""),[c,s]=Object(n.useState)(""),[i,p]=Object(n.useState)(!1),[E,h]=Object(n.useState)("");return l.a.createElement("div",null,i?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"header"},l.a.createElement("h1",{style:{marginRight:"auto"}},"Welcome"),l.a.createElement(g,null)),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"block"},l.a.createElement("h1",null,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),l.a.createElement(m,{token:E})),l.a.createElement("div",{className:"block"},l.a.createElement(d,{token:E})),l.a.createElement("div",{className:"block"},l.a.createElement(u,{token:E})))):l.a.createElement("div",{className:"login-container"},l.a.createElement("form",{className:"login-form",onSubmit:async t=>{t.preventDefault();try{const t=(await o.a.post("https://01.kood.tech/api/auth/signin",{},{auth:{username:e,password:a}})).data;localStorage.setItem("token",t),h(t),p(!0)}catch(n){console.error("Error during login:",n),s("Invalid username/email or password")}}},l.a.createElement("h2",null,"Login"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"username"},"Username/Email:"),l.a.createElement("input",{type:"text",id:"username",value:e,onChange:e=>t(e.target.value)})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password"},"Password:"),l.a.createElement("input",{type:"password",id:"password",value:a,onChange:e=>r(e.target.value)})),l.a.createElement("button",{type:"submit"},"Login"),c&&l.a.createElement("p",{className:"error-message"},c))))};const y=Object(s.b)([{path:"/",element:l.a.createElement(h,null)},{path:"/login",element:l.a.createElement(h,null)}]);c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(s.a,{router:y})))}},[[14,1,2]]]);
//# sourceMappingURL=main.5745eea7.chunk.js.map